name: Simple Title Verification

on:
  push:
    branches: [ main, development ]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: Install dependencies
      run: |
        pip install --upgrade pip
        pip install selenium webdriver-manager pytest

    - name: Install Google Chrome
      run: |
        sudo apt update
        sudo apt install -y google-chrome-stable

    - name: Run Modular Framework Test
      env:
        DISPLAY: :99
      run: |
        python - <<'EOF'
        from Capstone_Project.Selenium.Modular_Framework.modular_framework_demo import start_browser, main

        # âœ… Start Chrome in headless mode for GitHub Actions
        import sys
        def patched_browser():
            from selenium import webdriver
            from selenium.webdriver.chrome.options import Options
            chrome_options = Options()
            chrome_options.add_argument("--headless=new")
            chrome_options.add_argument("--no-sandbox")
            chrome_options.add_argument("--disable-dev-shm-usage")
            chrome_options.add_argument("--disable-gpu")
            chrome_options.add_argument("--window-size=1920,1080")
            driver = webdriver.Chrome(options=chrome_options)
            driver.maximize_window()
            return driver

        # Patch your function before calling main()
        import Capstone_Project.Selenium.Modular_Framework.modular_framework_demo as demo
        demo.start_browser = patched_browser

        demo.main()
        EOF


## .github/workflows/verify-title.yml
#
#name: Simple Title Verification
#
#
#
#on:
#
#  push:
#
#    branches: [ main, development ]
#
#  workflow_dispatch:
#
#
#
#jobs:
#
#  test:
#
#    runs-on: ubuntu-latest
#
#
#
#    steps:
#
#    - uses: actions/checkout@v4
#
#
#
#    - name: Setup Python
#
#      uses: actions/setup-python@v4
#
#      with:
#
#        python-version: '3.11'
#
#
#
#    - name: Install packages
#
#      run: |
#
#        pip install --upgrade pip
#
#        pip install selenium webdriver-manager
#
#        pip install pytest
#
#
#
#    - name: Install Chrome
#
#      run: |
#
#        sudo apt update
#
#        sudo apt install -y google-chrome-stable
#
#
#
#    - name: Run verification script
#      run: python Capstone_Project/Selenium/Modular_Framework/modular_framework_demo.py
#
##      run: pytest Nov_6/tests_lab
